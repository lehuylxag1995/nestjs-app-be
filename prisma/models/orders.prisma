enum OrderStatus {
    PENDING // Chờ xác nhận
    DELIVERED // Vận chuyển
    SHIPPED // Đã giao
    CANCELLED // Hủy đơn
    PAID // Trả hàng
}

model Order {
    id     String      @id @default(uuid())
    status OrderStatus @default(PENDING)
    total  Decimal     @db.Decimal(13, 3)
    userId String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    //Bắt buộc đăng ký để đặt hàng
    user  User?       @relation(fields: [userId], references: [id], onDelete: SetNull)
    items OrderItem[]

    @@map("Orders")
}

model OrderItem {
    id        String  @id @default(uuid())
    quantity  Int
    price     Decimal @db.Decimal(13, 3)
    total     Decimal @db.Decimal(13, 3)
    orderId   String
    productId String?

    order   Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
    product Product? @relation(fields: [productId], references: [id], onDelete: SetNull)

    @@map("OrderItems")
}
